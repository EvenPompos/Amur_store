<Page x:Class="Amur_store.Views.AddEmployeePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      Title="Управление персоналом"
      Loaded="Page_Loaded">

    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0.1,0" EndPoint="0.9,1">
                <GradientStop Color="#FF0F172A" Offset="0" />
                <GradientStop Color="#FF1E293B" Offset="1" />
            </LinearGradientBrush>
        </Grid.Background>

        <Border Height="200" VerticalAlignment="Top" CornerRadius="0 0 120 0" Background="#100E17" Opacity="0.5"/>

        <Grid Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Margin="10,0,0,20">
                <TextBlock Text="Управление персоналом" FontSize="32" Foreground="White" FontWeight="Bold"/>
                <TextBlock Text="Добавление и удаление учетных записей сотрудников" FontSize="16" Foreground="#94A3B8" Margin="0,5,0,0"/>
            </StackPanel>

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1.5*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="#1E293B" CornerRadius="12" BorderBrush="#334155" BorderThickness="1" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Список сотрудников" FontSize="20" Foreground="White" FontWeight="SemiBold" Margin="0,0,0,15"/>

                        <DataGrid x:Name="EmployeesGrid" Grid.Row="1"
                                  AutoGenerateColumns="False" CanUserAddRows="False"
                                  Background="Transparent" BorderThickness="0"
                                  RowBackground="#0F172A" AlternatingRowBackground="#1E293B"
                                  Foreground="White" GridLinesVisibility="Horizontal"
                                  HorizontalGridLinesBrush="#334155" HeadersVisibility="Column">

                            <DataGrid.Resources>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="#94A3B8"/>
                                    <Setter Property="Padding" Value="10"/>
                                </Style>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="Padding" Value="5"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="DataGridCell">
                                                <Border Padding="{TemplateBinding Padding}" 
                                                        BorderBrush="{TemplateBinding BorderBrush}" 
                                                        BorderThickness="{TemplateBinding BorderThickness}" 
                                                        Background="{TemplateBinding Background}" 
                                                        SnapsToDevicePixels="True">
                                                    <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </DataGrid.Resources>

                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding EmployeeID}" Width="50" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Фамилия" Binding="{Binding Surname}" Width="*" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Имя" Binding="{Binding Name}" Width="*" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Должность" Binding="{Binding Position.PositionName}" Width="140" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Логин" Binding="{Binding Users.Login}" Width="100" IsReadOnly="True"/>

                                <DataGridTemplateColumn Header="Действия" Width="100">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Content="Удалить" 
                                                    Click="DeleteEmployee_Click"
                                                    Tag="{Binding EmployeeID}"
                                                    Background="#EF4444" BorderThickness="0"
                                                    Height="25" FontSize="12" Foreground="White"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </Border>

                <Border Grid.Column="2" Background="#1E293B" CornerRadius="12" BorderBrush="#334155" BorderThickness="1" Padding="20">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Новый сотрудник" FontSize="20" Foreground="#FBBF24" FontWeight="Bold" Margin="0,0,0,20"/>

                            <Grid>
                                <Grid.Resources>
                                    <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignOutlinedTextBox}">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="CaretBrush" Value="#3B82F6"/>
                                        <Setter Property="BorderBrush" Value="#475569"/>
                                        <Setter Property="Margin" Value="0,0,0,15"/>
                                        <Setter Property="materialDesign:HintAssist.Foreground" Value="#94A3B8"/>
                                    </Style>
                                </Grid.Resources>

                                <StackPanel>
                                    <TextBox x:Name="tbSurname" materialDesign:HintAssist.Hint="Фамилия"/>
                                    <TextBox x:Name="tbName" materialDesign:HintAssist.Hint="Имя"/>
                                    <TextBox x:Name="tbPatronymic" materialDesign:HintAssist.Hint="Отчество"/>
                                    <TextBox x:Name="tbPhone" materialDesign:HintAssist.Hint="Телефон"/>
                                    <TextBox x:Name="tbEmail" materialDesign:HintAssist.Hint="Email"/>

                                    <TextBlock Text="Должность" Foreground="#94A3B8" Margin="0,5,0,5"/>
                                    <ComboBox x:Name="cbPosition" 
                                              DisplayMemberPath="PositionName" 
                                              SelectedValuePath="PositionID"
                                              Foreground="White" Margin="0,0,0,20"
                                              Background="#0F172A" Padding="5"/>

                                    <Separator Background="#334155" Margin="0,10,0,15"/>
                                    <TextBlock Text="Данные для входа" Foreground="#FBBF24" FontWeight="SemiBold" Margin="0,0,0,10"/>

                                    <TextBox x:Name="tbLogin" materialDesign:HintAssist.Hint="Логин"/>
                                    <PasswordBox x:Name="pbPassword" 
                                                 materialDesign:HintAssist.Hint="Пароль"
                                                 Foreground="White" BorderBrush="#475569"
                                                 Height="40" Margin="0,0,0,20"/>

                                    <Button Content="ДОБАВИТЬ СОТРУДНИКА" 
                                            Click="AddEmployee_Click"
                                            Height="45" Background="#3B82F6" BorderThickness="0"
                                            Foreground="White" FontWeight="Bold" FontSize="14">
                                        <Button.Resources>
                                            <Style TargetType="Border">
                                                <Setter Property="CornerRadius" Value="8"/>
                                            </Style>
                                        </Button.Resources>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</Page>